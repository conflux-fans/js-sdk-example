const { conflux } = require('./setup');

describe('ABI decode', () => {

    test('PoS Register data decode', async () => {
        const PoSRegister = conflux.InternalContract('PoSRegister');
        const data = '0xe335b4514a8fb61dc6074bd2d0cc9d8b06c70062357b2f6df3b9962760acb4bc9266de73000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000030a3fae6364534fbdff1c5e24a7e78107d75a266b98a88abb76ddfb47d41be0d6c8bf9eb6bcbc4729ce8db53ef31a9012500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002103864220ee93d72dd009e3a6312781e15976d15f53700bb32af353af6734af3dc300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000308a7524b153bb59b2d07bda3f28dea485ed4f7417f336edf3824a33b2460f4e400273897711306705093a753d16211754000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020560aeeb836fbb7793523714ac955a1cf23f6b90e27fbb6eb43328bb007b7e258';
        const decoded = PoSRegister.abi.decodeData(data);
        const identifier = '4a8fb61dc6074bd2d0cc9d8b06c70062357b2f6df3b9962760acb4bc9266de73';
        expect(decoded.object.indentifier.toString('hex')).toBe(identifier);
    });
});
